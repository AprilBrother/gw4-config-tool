<link rel="stylesheet" type="text/css" href="js/jquery-tagsinput/jquery.tagsinput-revisited.min.css">

    <div class="header">
        <h2>Configuration</h2>
    </div>

    <div class="content">
        <div class="pure-menu pure-menu-horizontal">
            <ul class="pure-menu-list">
                <li class="pure-menu-item" onclick="selectDashboard()">Dashboard</li>
                <li class="pure-menu-item" onclick="selectWIFI()">Network</li>
                <li class="pure-menu-item pure-menu-selected" onclick="selectApp()">Application</li>
                <li class="pure-menu-item" onclick="selectAdvanced()">Advanced</li>
            </ul>
        </div>

        <div>&nbsp;</div>
        <form class="pure-form pure-form-aligned" id="f-app" action="/config" method="post">

            <div class="pure-control-group">
                <label for="conn-type">Connection Type</label>
                <select name="conn-type" id="conn-type">
                    <option value="1">WebSocket Client</option>
                    <option value="2">HTTP Client</option>
                    <option value="3">MQTT Client</option>
                    <option value="4">TCP Client</option>
                </select>
            </div>

            <div id="cont-ws-client">
                <div class="pure-control-group">
                    <label for="ws-host">Host <span class="t-red">*</span></label>
                    <input id="ws-host" class="pure-input-1-2" name="ws-host" placeholder="Domain name or IP for server">
                </div>

                <div class="pure-control-group">
                    <label for="ws-port">Port <span class="t-red">*</span></label>
                    <input id="ws-port" name="ws-port" type="number" min="80" max="65535">
                    <span class="pure-form-message-inline">Port number, e.g., 8080</span>

                </div>

                <div class="pure-control-group">
                    <label for="ws-url">URI <span class="t-red">*</span></label>
                    <input id="ws-url" name="ws-url" placeholder="/">
                </div>

                <div class="pure-control-group" id="cont-wss">
                    <label for="wss">WSS</label>
                    <select id="wss" name="wss">
                        <option value="0">Disable</option>
                        <option value="1">Enable</option>
                    </select> 
                    <button type="button" class="pure-button btn-cert">Setup Certificates</button>
                </div>
            </div>

            <div id="cont-tcp-client">
                <div class="pure-control-group">
                    <label for="tcp-host">Host <span class="t-red">*</span></label>
                    <input id="tcp-host" class="pure-input-1-2" name="tcp-host" placeholder="Domain name or IP for server">
                </div>

                <div class="pure-control-group">
                    <label for="tcp-port">Port <span class="t-red">*</span></label>
                    <input id="tcp-port" name="tcp-port" type="number" min="80" max="65535">
                    <span class="pure-form-message-inline">Port number, e.g., 8080</span>
                </div>
            </div>

            <div id="cont-http-client">
                <div class="pure-control-group">
                    <label for="http-host">Host <span class="t-red">*</span></label>
                    <input id="http-host" type="text" class="pure-input-1-2" name="http-host" placeholder="Domain name or IP for server">
                </div>

                <div class="pure-control-group">
                    <label for="http-port">Port <span class="t-red">*</span></label>
                    <input id="http-port" name="http-port" type="number" min="80" max="65535">
                    <span class="pure-form-message-inline">Port number, e.g., 8080</span>
                </div>

                <div class="pure-control-group">
                    <label for="http-url">URI <span class="t-red">*</span></label>
                    <input id="http-url" class="pure-input-1-2" name="http-url" placeholder="URI, e.g, app.php?data=">
                </div>
                <div class="pure-control-group" id="cont-https">
                    <label for="https">HTTPS</label>
                    <select id="https" name="https">
                        <option value="0">Disable</option>
                        <option value="1">Enable</option>
                    </select> 
                    <button type="button" class="pure-button btn-cert">Setup Certificates</button>
                </div>
            </div>

            <div id="cont-mqtt-client">
                <div class="pure-control-group">
                    <label for="mqtt-host">Host <span class="t-red">*</span></label>
                    <input id="mqtt-host" class="pure-input-1-2" name="mqtt-host" placeholder="Domain name or IP for MQTT Broker">
                </div>
                <div class="pure-control-group">
                    <label for="mqtt-port">Port <span class="t-red">*</span></label>
                    <input id="mqtt-port" name="mqtt-port" type="number" min="80" max="65535">
                    <span class="pure-form-message-inline">Port number, e.g., 1883</span>
                </div>
                <div class="pure-control-group">
                    <label for="mqtt-id-prefix">Client ID Prefix <span class="t-red">*</span></label>
                    <input id="mqtt-id-prefix" name="mqtt-id-prefix" placeholder="XBG_">
                    <span class="pure-form-message-inline" id="cont-final-id"></span>
                </div>
                <div class="pure-control-group">
                    <label for="mqtt-topic">Publish Topic <span class="t-red">*</span></label>
                    <input id="mqtt-topic" name="mqtt-topic" class="pure-input-3-4" placeholder="MQTT Topic">
                </div>
                <div class="pure-control-group" id="cont-qos">
                    <label for="mqtt-qos">QoS</label>
                    <select id="mqtt-qos" name="mqtt-qos">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                    </select>
                </div>
                <div class="pure-control-group" id="cont-retain">
                    <label for="mqtt-retain">Retain</label>
                    <select id="mqtt-retain" name="mqtt-retain">
                        <option value="0">Disable</option>
                        <option value="1">Enable</option>
                    </select>
                </div>
                <div class="pure-control-group" id="cont-keepalive">
                    <label for="mqtt-keepalive">Keepalive</label>
                    <input id="mqtt-keepalive" name="mqtt-keepalive" placeholder="0" value="0" type="number" max="600" min="0">
                    <span class="pure-form-message-inline">0 = Disable</span>
                </div>
                <div class="pure-control-group">
                    <label for="mqtt-username">Username (optional)</label>
                    <input id="mqtt-username" name="mqtt-username" type="text">
                </div>
                <div class="pure-control-group">
                    <label for="mqtt-password">Password (optional)</label>
                    <input id="mqtt-password" name="mqtt-password" type="text">
                </div>
                <div class="pure-control-group" id="cont-mqtts">
                    <label for="mqtts">MQTTS</label>
                    <select id="mqtts" name="mqtts">
                        <option value="0">Disable</option>
                        <option value="1">Enable</option>
                    </select> 
                    <button type="button" class="pure-button btn-cert">Setup Certificate</button>
                </div>
                <div id="cont-mqtt-config">
                    <div class="pure-control-group">
                        <label for="mqtt-config">Config by MQTT</label>
                        <select id="mqtt-config" name="mqtt-config">
                            <option value="0">Disable</option>
                            <option value="1">Enable</option>
                        </select> 
                        <a href="https://wiki.aprbrother.com/en/gw4/config_with_mqtt.html#configure-parameters-with-mqtt" target="_blank"><span class="ui-icon ui-icon-help"></span></a>
                    </div>
                    <div id="cont-cfg-topic">
                        <div class="pure-control-group">
                            <label for="cfg-topic">Config Topic</label>
                            <input id="cfg-topic" name="cfg-topic" placeholder="Config Topic">
                        </div>
                        <div class="pure-control-group">
                            <label for="one-cfg-topic">Topic Prefix For Device Inbox</label>
                            <input id="one-cfg-topic" name="one-cfg-topic" placeholder="Topic Prefix For Device Inbox">
                            <span class="pure-form-message-inline" id="cont-one-topic"></span>
                        </div>
                        <div class="pure-control-group">
                            <label for="one-pub-topic">Device Outbox Topic</label>
                            <input id="one-pub-topic" name="one-pub-topic" placeholder="Device Outbox Topic">
                        </div>
                    </div>
                </div>
            </div>

            <div class="cont-toggle">
             <label for="toggle" class="toggle-label"><span class="icon-fold">&#9654;</span> Additional settings</label>
            </div>

            <div class="cont-fold hiden">
            <fieldset>
            <legend>&nbsp;</legend>

            <div class="pure-control-group">
                <label for="req-int">Request interval <span class="t-red">*</span></label>
                <input id="req-int" name="req-int" placeholder="1" value="1" type="number" max="1800" min="1">
                <span class="pure-form-message-inline">Seconds</span>
            </div>

            <div class="pure-control-group hidden" id="cont-scan-window">
                <label for="scan-window">Scan window</label>
                <input id="scan-window" name="scan-window" placeholder="3" value="3" type="number" max="10" min="1">
                <span class="pure-form-message-inline">Seconds</span>
            </div>

            <div class="pure-control-group" id="cont-req-format">
                <label for="req-format">Request format</label>
				<select id="req-format" name="req-format">
					<option value="0">MessagePack</option>
					<option value="1">JSON</option>
					<option value="2">Compatible with Wireless iBeacon receiver</option>
                </select>
                <span class="pure-form-message-inline">JSON performance is much lower</span>
            </div>

            <div class="pure-control-group" id="cont-metadata">
                <label for="metadata">Custom metadata</label>
                <textarea class="pure-input-1-2" id="metadata" name="metadata" maxlength="256" placeholder="JSON format"></textarea>
                <span class="pure-form-message-inline">Max length=256</span>
            </div>

            <div class="pure-control-group">
                <label for="min-rssi">RSSI filter</label>
				<select id="sel-min-rssi" name="sel-min-rssi">
                    <option value="-127">Default</option>
                    <option value="-51">0.5 Meter</option>
                    <option value="-60">1 Meter</option>
                    <option value="-63">2 Meter</option>
                    <option value="-66">3 Meters</option>
                    <option value="-68">4 Meter</option>
                    <option value="-70">5 Meters</option>
                    <option value="-72">6 Meters</option>
                    <option value="-74">7 Meters</option>
                    <option value="-76">8 Meters</option>
                    <option value="-78">9 Meters</option>
                    <option value="-80">10 Meters</option>
                    <option value="-82">11 Meters</option>
                    <option value="-84">12 Meters</option>
                    <option value="-86">13 Meters</option>
                    <option value="-88">14 Meters</option>
                    <option value="-90">15 Meters</option>
                </select>
                <input type="number" id="min-rssi" name="min-rssi" min="-127" max="-15" placeholder="RSSI"> dB
                <span class="pure-form-message-inline">This distance is a rough estimate</span>
            </div>

            <div class="pure-control-group">
                <label for="scan-act">Scan mode</label>
				<select id="scan-act" name="scan-act">
					<option value=0>Passive Scan</option>
					<option value=1>Active Scan</option>
				</select>
            </div>

            <div class="pure-control-group cont-long hiden">
                <label for="scan-phy">Scan PHY</label>
				<select id="scan-phy" name="scan-phy">
					<option value="1">1 Mbps PHY</option>
					<option value="4">Coded PHY</option>
				</select>
            </div>

            <div class="pure-control-group">
                <label for="adv-filter">Advertising filter</label>
				<select id="adv-filter" name="adv-filter">
					<option value="0">Allow All Advertising Data</option>
					<option value="1">iBeacon Only</option>
					<option value="2">Eddystone UID Only</option>
					<option value="3">Eddystone URL Only</option>
                    <option value="4">Sensor mode, supports some Xiaomi sensor</option>
                    <option value="5">Custom mode</option>
					<option value="11">iBeacon And Eddystone TLM Plain</option>
					<option value="12">Eddystone UID And Eddystone TLM Plain</option>
					<option value="13">Eddystone URL And Eddystone TLM Plain</option>
				</select>
            </div>

            <div class="pure-control-group" id="cont-mfg-filter">
                <label for="filter-mfg">Manufacturer ID filter</label>
                <input class="pure-input-1-5" id="mfg" type="text" maxlength="4" placeholder="Hexadecimal format">
                <span class="pure-form-message-inline">Decimal</span>
                <input class="pure-input-1-5" id="filter-mfg" name="filter-mfg" type="number" min="0" max="65535" readonly>
            </div>

            <div class="pure-control-group" id="cont-uuid-filter">
                <label for="filter-uuid">iBeacon UUID whitelist</label>
                <textarea class="pure-input-1-2" id="filter-uuid" name="filter-uuid"></textarea>
                <span class="pure-form-message-inline">Max UUID number=4</span>
            </div>

            <div class="pure-control-group" id="cont-custom-filter">
                <label for="filter-cstm">Custom filter rule</label>
                <textarea class="pure-input-1-2" id="filter-cstm" name="filter-cstm"></textarea>
                <span class="pure-form-message-inline">E.g. 5-6=ab1f</span>
            </div>

            <div class="pure-control-group">
                <label for="dup-filter">Duplicate filter</label>
				<select id="dup-filter" name="dup-filter">
					<option value="0">Disable</option>
					<option value="1">Enable</option>
				</select>
            </div>

            <div class="pure-control-group" id="cont-hb-int">
                <label for="hb-int">Heartbeat interval</label>
                <input id="hb-int" name="hb-int" placeholder="30" value="30" type="number" max="120" min="0">
                <span class="pure-form-message-inline">Seconds</span>
            </div>

            <div class="pure-control-group hidden" id="cont-loop">
                <label for="loop-save">Rotate logging</label>
				<select id="loop-save" name="loop-save">
					<option value="0">Disable</option>
					<option value="1">Enable</option>
                </select>
            </div>

            </fieldset>

            <fieldset id="cont-ntp">
            <legend>Time Syncchronization</legend>
            <div class="pure-control-group">
                <label for="ntp-enabled">Enable NTP Client</label>
				<select id="ntp-enabled" name="ntp-enabled">
					<option value="0">No</option>
					<option value="1">Yes</option>
				</select>
            </div>

            <div class="pure-control-group">
                <label for="ntp1">NTP server 1</label>
                <input id="ntp1" class="pure-input-1-2" name="ntp1" placeholder="Domain name for NTP server">
            </div>

            <div class="pure-control-group">
                <label for="ntp2">NTP server 2</label>
                <input id="ntp2" class="pure-input-1-2" name="ntp2" placeholder="Domain name for NTP server">
            </div>
            </fieldset>

            </div>

            <div class="pure-controls">
                <button type="button" class="pure-button pure-button-primary" id="btn-save-app">Save</button>
                <button type="button" class="pure-button" id="btn-default">Save As Default</button>
                <button type="button" class="pure-button" id="btn-clear">Clear Default</button>

            </div>
        </form>

        <form class="pure-form pure-form-aligned" action="/filter_ble" enctype="multipart/form-data" method="post" id="f-filter-mac">
            <fieldset>
                <legend>&nbsp;</legend>
                <div class="pure-control-group">
                    <label for="mac">MAC address filter</label>
                    <textarea class="tagsinput" name="mac" id="mac"></textarea>
                </div>

                <div class="pure-control-group cont-services">
                    <label for="services">Service filter</label>
                    <textarea class="tagsinput" name="services" id="services"></textarea>
                </div>

                <div class="pure-control-group cont-chars">
                    <label for="chars">Characteristics filter</label>
                    <textarea class="tagsinput" name="chars" id="chars"></textarea>
                </div>

            </fieldset>

            <div class="pure-controls">
                <button type="button" class="pure-button pure-button-primary" id="btn-save-mac">Save filter</button>
            </div>
        </form>
    </div>

<script src="js/jquery-tagsinput/jquery.tagsinput.js"></script>
<script src="js/app.js"></script>
